<div class="container-fluid">
  <div class="header">Post your add</div>
  <div class="container">
    <div class="heading">
      <h4>SELECTED CATEGORY</h4>
      <div class="selected-cat">
        <p>{{ mainCategory }}/{{ subCategory }}</p>
        <a routerLink="/post-menu" *ngIf="mode == undefined">Change</a>
      </div>
      <nav class="navbar-bottom"></nav>
    </div>
    <h4>INCLUDE SOME DETAILS</h4>
    <div class="include-details">
      <div *ngIf="fieldsToShow.includes('HouseType')">
        <mat-label>Type</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.houseType">
            <mat-chip-option
              *ngFor="let house of houseTypes"
              (click)="selectHouseType(house)"
              [value]="house.id"
              >{{ house.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('ServiceType')">
        <mat-label>Service Type</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.serviceType">
            <mat-chip-option
              *ngFor="let serviceType of serviceTypes"
              (click)="selectServiceType(serviceType)"
              [value]="serviceType.id"
              >{{ serviceType.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('SubType')">
        <mat-label>SubType</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.pgType">
            <mat-chip-option
              *ngFor="let pgType of pgTypes"
              (click)="selectPgType(pgType)"
              [value]="pgType.id"
              >{{ pgType.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Furnishing')">
        <mat-label>Furnishing</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.furnishingStatus">
            <mat-chip-option
              *ngFor="let furnishing of furnishingStatus"
              (click)="selectFurnishing(furnishing)"
              [value]="furnishing.id"
              >{{ furnishing.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Bedrooms')">
        <mat-label>Bedrooms</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.bedrooms">
            <mat-chip-option
              *ngFor="let bedRoom of numberOfBedRooms"
              (click)="selectBedRoomNumber(bedRoom)"
              [value]="bedRoom"
              >{{ bedRoom }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Bathrooms')">
        <mat-label>Bathrooms</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.bathrooms">
            <mat-chip-option
              *ngFor="let bathRoom of numberOfBathRooms"
              (click)="selectBathRoomNumber(bathRoom)"
              [value]="bathRoom"
              >{{ bathRoom }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Construction Status')">
        <mat-label>Construction status</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.constructionStatus">
            <mat-chip-option
              *ngFor="let construction of constructionStatus"
              (click)="selectConstructionStatus(construction)"
              [value]="construction.id"
              >{{ construction.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Listed by')">
        <mat-label>Listed By</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.listedBy">
            <mat-chip-option
              *ngFor="let listBy of listedBy"
              (click)="selectListBy(listBy)"
              [value]="listBy.id"
              >{{ listBy.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <mat-form-field *ngIf="fieldsToShow.includes('Super Builtup area')">
        <mat-label>Super Builtup area (ft²)</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'superBuildUpArea')"
          [(ngModel)]="propertyData.superBuildUpArea"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Carpet Area')">
        <mat-label>Carpet Area (ft²) *</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'carpetArea')"
          [(ngModel)]="propertyData.carpetArea"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Plot Area')">
        <mat-label>Plot Area</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'plotArea')"
          [(ngModel)]="propertyData.plotArea"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Length')">
        <mat-label>Length</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'lenght')"
          [(ngModel)]="propertyData.lenght"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Breadth')">
        <mat-label>Breadth</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'breadth')"
          [(ngModel)]="propertyData.breadth"
        />
      </mat-form-field>
      <div *ngIf="fieldsToShow.includes('Bachelors Allowed')">
        <mat-label>Bachelors Allowed</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.bachelorAllowed">
            <mat-chip-option
              *ngFor="let bachelor of bachelorsAllowed"
              (click)="selectBachelor(bachelor)"
              [value]="bachelor.value"
              >{{ bachelor.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <div *ngIf="fieldsToShow.includes('Meals Included')">
        <mat-label>Meals Included</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.isMealIncluded">
            <mat-chip-option
              *ngFor="let meal of mealsIncluded"
              (click)="selectMeal(meal)"
              [value]="meal.value"
              >{{ meal.label }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <mat-form-field *ngIf="fieldsToShow.includes('Maintenance')">
        <mat-label>Maintenance (Monthly)</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'maintenanceCharge')"
          [(ngModel)]="propertyData.maintenanceCharge"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Total Floors')">
        <mat-label>Total Floors</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'totalFloors')"
          [(ngModel)]="propertyData.totalFloors"
        />
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Floor No')">
        <mat-label>Floor No</mat-label>
        <input
          matInput
          placeholder=""
          (input)="allowOnlyNumbersInInput($event, 'floorNumber')"
          [(ngModel)]="propertyData.floorNumber"
        />
      </mat-form-field>
      <div *ngIf="fieldsToShow.includes('Car Parking')">
        <mat-label>Car Parking</mat-label>
        <div class="fueltype">
          <mat-chip-listbox [(ngModel)]="propertyData.carParking">
            <mat-chip-option
              *ngFor="let parking of carParking"
              (click)="selectCarParking(parking)"
              [value]="parking"
              >{{ parking }}</mat-chip-option
            >
          </mat-chip-listbox>
        </div>
      </div>
      <mat-form-field
        appearance="fill"
        class="form-field-w-100"
        *ngIf="fieldsToShow.includes('Facing')"
      >
        <mat-label>Facing</mat-label>
        <mat-select
          (selectionChange)="handleFacingType($event)"
          [(ngModel)]="propertyData.facingType"
        >
          <mat-option
            *ngFor="let facingType of facingTypes"
            [value]="facingType.id"
            >{{ facingType.label }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      <mat-form-field *ngIf="fieldsToShow.includes('Project Name')">
        <mat-label>Project Name</mat-label>
        <input matInput placeholder="" [(ngModel)]="propertyData.projectName" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Title</mat-label>
        <input
          matInput
          placeholder="Enter Title"
          [(ngModel)]="commonPayload.title"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Description</mat-label>
        <textarea
          matInput
          placeholder="Enter Description"
          name="textareaInput"
          [(ngModel)]="commonPayload.discription"
          rows="3"
        ></textarea>
      </mat-form-field>
    </div>

    <div class="price-section">
      <h4>SET A PRICE</h4>
      <div class="include-details">
        <mat-form-field>
          <mat-label>Price</mat-label>
          <input
            matInput
            placeholder="Enter price"
            (input)="allowOnlyNumbers($event)"
            [(ngModel)]="commonPayload.price"
          />
        </mat-form-field>
        <div *ngIf="!isPriceValid" style="color: red; margin-top: -10px">
          Price should contain a minimum of two digits*
        </div>
      </div>
    </div>
    <div class="uplod-sectin h-365">
      <h4>UPLOAD UP TO 10 PHOTOS</h4>
      <div class="progs" *ngIf="progress">
        <h5>Upload Progress</h5>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </div>
      <div class="cards-cont">
        <ul class="upld">
          <li
            class="upload-card"
            *ngFor="let item of cardsCount; let i = index"
          >
            <div
              class="upload-card-brd"
              (click)="selectFile()"
              id="{{ i }}"
              *ngIf="item == ''"
            >
              <input
                type="file"
                id="fileUpload"
                name="fileUpload"
                (change)="selectImage($event)"
                style="display: none"
                multiple
              />
              <div>
                <button class="camera">
                  <img src="../../../assets/camera.svg" alt="camera" />
                </button>
                <span class="add">Add photo</span>
              </div>
            </div>
            <div class="upload-card-brd" *ngIf="item != ''">
              <div class="preview">
                <button
                  class="delete-button"
                  (click)="deleteBackgroundImage(i)"
                >
                  <span class="delete-icon">&#10006;</span>
                </button>
                <div class="first-image" *ngIf="i === 0 && firstImageUploaded">
                  <div class="cover-tag">Cover Photo</div>
                </div>
                <img [src]="item" height="100px" width="100px" alt="" />
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class="include-details">
      <h4 class="loc">CONFIRM YOUR LOCATION</h4>
      <mat-form-field>
        <mat-label>Pincode</mat-label>
        <input
          matInput
          placeholder="Enter your pincode"
          (input)="getAddress($event); allowOnlyNumbersPincode($event)"
          [(ngModel)]="commonPayload.pincode"
          maxlength="6"
        />
      </mat-form-field>
      <mat-form-field *ngIf="commonPayload.state != ''">
        <mat-label>State</mat-label>
        <input
          matInput
          placeholder="State"
          [(ngModel)]="commonPayload.state"
          readonly
        />
      </mat-form-field>
      <mat-form-field *ngIf="commonPayload.state != ''">
        <mat-label>City</mat-label>
        <input
          matInput
          placeholder="City"
          [(ngModel)]="commonPayload.city"
          readonly
        />
      </mat-form-field>
      <mat-form-field *ngIf="commonPayload.state != ''">
        <mat-label>Near By</mat-label>
        <!-- Add a dropdown for post office names -->
        <mat-select [(ngModel)]="commonPayload.nearBy">
          <mat-option
            *ngFor="let postOffice of postOffices"
            [value]="postOffice.Name"
          >
            {{ postOffice.Name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="details">
      <h4>REVIEW YOUR DETAILS</h4>
      <div class="flx">
        <div class="circle">
          <img [src]="imageUrl" alt="Uploaded Image" />
          <input
            type="file"
            id="upload"
            (change)="uploadProfilePicture($event)"
            style="display: none"
          />
        </div>
        <button class="upload-button" (click)="selectProfilePicture()">
          +
        </button>
        <div class="wd-300">
          <div class="wd-100">
            <p class="w-50">Name</p>
            <p>{{ userData?.firstName }}</p>
          </div>
          <div class="wd-100">
            <p class="w-50">Phone number</p>
            <p>{{ userData?.mobileNo }}</p>
          </div>
        </div>
      </div>
    </div>
    <div>
      <button
        class="post"
        mat-raised-button
        color="primary"
        (click)="postAdd()"
        *ngIf="!isFromAdmin"
      >
        Publish Now
      </button>
      <button
        class="post"
        mat-raised-button
        color="primary"
        (click)="verifyAdd()"
        *ngIf="isFromAdmin"
      >
        Approve Now
      </button>
    </div>
  </div>
</div>
